---
layout: single
title:  "The model to flatten the curve"
date:   2020-04-05 12:00:00 -0600
published: false
tag: [python]
toc: true
excerpt: With the covid-19 pandemic distruping everyday life across the globle, a phrase we hear a lot is to "flatten the curve". What is the science behind that?
header:
  teaser: /assets/images/coronavirus-flatten-the-curve.png
---

As the current covid-19 pandemic sweeping across the global (certainly in New York) and posting dreadful tallies day over day, most of the goverments are urging their citizens to stay home, practice the solicial distance, in order to "flatten the curve", and get us out from this crisis. 

## Why we need to flatten the curve
The curve referenced here usually refers to the number of hospitalizations over time. Being a respiratory disease, the covid-19 patients require care with medical resources, such as hospital staffs and ventilators. The problem is, once the number of patients overwhelms the medical resources in the area, there is almost nothing the doctors can do, but forced to make difficult and agonizing decisions [[1](https://www.nytimes.com/2020/03/12/opinion/coronavirus-hospital-shortage.html)]. 

In order to avoid such meltdown of medical resources, the key is to slow the transmission of the disease among the population, such that the rush to the hospitals is spread out over time. Qualitatively, this makes perfect sense, however, how does one calculate the curve quantitatively, namely, put the numbers on the curve?

## The model that draws the curve
The most commonly used framework in modelling infectious disease is the [SIR model](https://en.wikipedia.org/wiki/Compartmental_models_in_epidemiology#The_SIR_model). The basic construct of the model is pretty simple: the whole population is divided into different "compartments", and any person is in one of those buckets. In the most basic setting, there will be three compartments: **S**usceptible (not yet have the disease), **I**nfectious (have the disease), and **R**ecovered (immuned). A person will move from one compartment to another as time progress, and the dynamic (rate) of people moving between different compartments dictates the total number of people in each compartment will help us to draw the curve.

### From S to I
At a given time $$t$$, if there are total number of infectious people is $$I$$, then the number of people they can infect (hence being turned to infectious) can be desribed as $$I(t) \beta \frac{S(t)}{S(t) + I(t) + R(t)}$$. The term $$\beta$$ is the probability of transimission from an infectious person to a susceptible person, and the last term is the propotion of the susceptible people in the whole population. In this dyanmical system setting, $$\beta$$ can be considered as the "infection rate". 
<figure>
<center>
<a href="/assets/images/sir_s_to_i.png"><img src="/assets/images/sir_s_to_i.png"></a>
</center>
</figure>

### From I to R (or D)
Once a person become infectious, the next compartment(s) for him/her to go is recovered, or unfortunately dead. Note that in the vanilla version of the SIR model, death is not considered, however, given the unusally high fatality rate of covid-19 [[2](https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html)], we can not ignore the non-zero death rate. 

With the above consideration in mind, we will assume the number of people moving from $$I$$ to $$R$$ is $$(1-\eta) \gamma I(t)$$, and the number of people moving from $$I$$ to $$D$$ is $$\eta I(t)$$. Again, in this dyanmical system setting, $$\gamma$$ and $$\eta$$ can be treated as the (quasi-)recovery rate and death rate (due to the disease), respectively. 
<figure>
<center>
<a href="/assets/images/sir_i_to_rd.png"><img src="/assets/images/sir_i_to_rd.png"></a>
</center>
</figure>

### Putting everything together

Now we have all the ingredients of this SIR(D) model in place, the next thing is to properly describe their dynamics between each other ($$S, I, R, D$$), shown as the odinary differential equation (ODE) below:

$$
\begin{split}
\text{d}S(t) &= -\beta I(t) \frac{S(t)}{S(t) + I(t) + R(t)}\\
\text{d}I(t) &= -\text{d}S(t) - \gamma I(t)\\
\text{d}R(t) &= (1-\eta) \gamma I(t)\\
\text{d}D(t) &= \eta \gamma I(t)
\end{split}.
$$

This can be easily solve numerically, 



